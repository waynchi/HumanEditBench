import os
import hashlib
import base64

project_name = "CheckerKMV"


def createLicense(secretKey: str) -> None:
    # Путь к папке проекта в %appdata%/Local
    appdata_path = os.path.join(os.environ["LOCALAPPDATA"], project_name)

    if not os.path.exists(appdata_path):
        os.makedirs(appdata_path)

    # Хешируем секретный ключ
    hashed_key = hashlib.sha256(secretKey.encode()).digest()
    # Кодируем хеш в base64
    encoded_key = base64.b64encode(hashed_key)

    with open(os.path.join(appdata_path, "license.dat"), "wb") as f:
        f.write(encoded_key)


# Пример использования
createLicense("my_secret_key")