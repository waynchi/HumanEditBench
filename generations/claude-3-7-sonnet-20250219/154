import random

def load_dictionary(file_path='dictionary.txt'):
    """
    加载英语词典文件
    默认文件名为dictionary.txt
    """
    try:
        with open(file_path, 'r') as file:
            # 读取所有单词并去除空白字符
            words = [word.strip() for word in file.readlines()]
        return words
    except FileNotFoundError:
        print(f"错误: 找不到词典文件 {file_path}")
        return []

def find_words_with_length(words, length):
    """
    查找具有指定长度的单词
    """
    matching_words = [word for word in words if len(word) == length]
    return matching_words

def main():
    # 加载词典
    dictionary = load_dictionary()
    
    if not dictionary:
        print("程序无法继续，因为词典为空。")
        return
    
    while True:
        try:
            # 获取用户输入
            user_input = input("\n请输入您想要查找的单词字符数(输入q退出): ")
            
            # 检查是否退出
            if user_input.lower() == 'q':
                print("谢谢使用，再见！")
                break
            
            # 转换输入为整数
            length = int(user_input)
            
            if length <= 0:
                print("请输入正整数。")
                continue
            
            # 查找匹配长度的单词
            matching_words = find_words_with_length(dictionary, length)
            
            if not matching_words:
                print(f"词典中没有包含 {length} 个字符的单词。")
            else:
                # 如果匹配单词不足10个，全部显示
                if len(matching_words) <= 10:
                    print(f"找到 {len(matching_words)} 个包含 {length} 个字符的单词:")
                    for word in matching_words:
                        print(word)
                else:
                    # 随机选择10个单词显示
                    sample = random.sample(matching_words, 10)
                    print(f"词典中有 {len(matching_words)} 个包含 {length} 个字符的单词，随机显示10个:")
                    for word in sample:
                        print(word)
        
        except ValueError:
            print("无效输入，请输入一个数字或'q'退出。")
        except Exception as e:
            print(f"发生错误: {e}")

if __name__ == "__main__":
    main()