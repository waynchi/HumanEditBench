import os
# 导入 hashlib
# 导入 base64

project_name = "CheckerKMV"


def createLicense(secretKey: str) -> None:
    # 项目文件夹在 %appdata%/Local 的路径
    appdata_path = os.path.join(os.environ["APPDATA"], project_name)

    if not os.path.exists(appdata_path):
        os.makedirs(appdata_path)

    # 使用 hashlib 和 base64 对 secretKey 进行编码
    import hashlib
    import base64
    # 创建 SHA-256 哈希
    hash_obj = hashlib.sha256(secretKey.encode('utf-8'))
    hash_bytes = hash_obj.digest()
    # 使用 base64 编码
    encoded_key = base64.b64encode(hash_bytes)
    
    with open(os.path.join(appdata_path, "license.dat"), "wb") as f:
        f.write(encoded_key)
