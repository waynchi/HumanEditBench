Looking at the code, I can see there are multiple issues with the main loop structure - it appears to be duplicated and malformed. The user wants to fix the beginning and end of the main loop. Let me correct this by removing the duplicated code and fixing the structure:
python
import pygame
import math

# Zainicjuj Pygame
pygame.init()

# Ustaw wyświetlacz
screen_width = 800
screen_height = 800
screen = pygame.display.set_mode((screen_width, screen_height))
pygame.display.set_caption('Flappy Bird Clone')

# Właściwości ptaka
bird_x = 100
bird_y = screen_height // 2
bird_width = 40
bird_height = 30
bird_flap_height = 10
gravity = 1
bird_velocity = 0

# Główna pętla
running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_SPACE:
                bird_velocity = -bird_flap_height

    # Zastosuj grawitację
    bird_velocity += gravity
    bird_y += bird_velocity

    # Wypełnij ekran kolorem (np. czarnym)
    screen.fill((0, 0, 0))

    # Narysuj ptaka
    pygame.draw.rect(screen, (255, 255, 0), (bird_x, bird_y, bird_width, bird_height))

    # Zaktualizuj wyświetlacz
    pygame.display.flip()

# Zakończ Pygame
pygame.quit()