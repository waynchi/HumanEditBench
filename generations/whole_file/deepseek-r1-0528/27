from langchain_ollama.chat_models import ChatOllama
from langchain_core.messages import HumanMessage, SystemMessage
import json

# Load JSON data and system prompt
with open("Vuori_Final_Approval_2024_09_24.json", "r") as file:
    shap_values_json = json.load(file).get("shap_values")
with open("system.prompt", "r") as file:
    sys_prompt = file.read().strip()

# Format user prompt
prompt = f"{shap_values_json}"

# Initialize ChatOllama and invoke with messages
chat_model = ChatOllama(model="llama3.2", base_url="http://localhost:11434")
messages = [
    SystemMessage(content=sys_prompt),
    HumanMessage(content=prompt),
]
response = chat_model.invoke(messages)

print(response.content)