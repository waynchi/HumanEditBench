import numpy as np

INPUT_FILE_PATH = './input.txt'
INPUT_FILE_PATH = './example_in.txt'

def main():
    lines = parse_input_file()
    # Convert each line into a list of characters and build a 2‑D NumPy array.
    # This ensures `grid` has shape (rows, cols) instead of being a 1‑D array of strings.
    grid = np.array([list(line) for line in lines if line])  # ignore possible empty lines
    print(grid)

    str_to_match = "XMAS"
    count = 0

    # Check horizontally
    for row in grid:
        row_str = ''.join(row)
        count += row_str.count(str_to_match)

    # Check vertically
    for col in range(grid.shape[1]):
        col_str = ''.join(grid[:, col])
        count += col_str.count(str_to_match)

    # Check diagonally (top‑left to bottom‑right)
    for offset in range(-(grid.shape[0] - 1), grid.shape[1]):
        diag = np.diagonal(grid, offset=offset)
        diag_str = ''.join(diag)
        count += diag_str.count(str_to_match)

    # Check diagonally (top‑right to bottom‑left)
    flipped_grid = np.fliplr(grid)
    for offset in range(-(flipped_grid.shape[0] - 1), flipped_grid.shape[1]):
        diag = np.diagonal(flipped_grid, offset=offset)
        diag_str = ''.join(diag)
        count += diag_str.count(str_to_match)

    print(f"Found {count} occurrences of {str_to_match}")

def parse_input_file():
    with open(INPUT_FILE_PATH, 'r') as f:
        lines = f.read().split("\n")
    return lines

if __name__ == "__main__":
    main()
