import { messages } from "./messages.js";

$().ready(() => {
    const loading = document.querySelector('.container-loading');
    const payment = document.querySelector('.payment-section');
    const info = document.querySelector('.user-info');
    const main = document.querySelector('.main');

    // Pobierz wartości z localStorage
    const storedData = JSON.parse(localStorage.getItem('userData')) || {};
    const userInfo = storedData.userInfo;
    const paymentInfo = storedData.paymentInfo;

    // Użyj pobranych danych według potrzeb
    console.log('User Info:', userInfo);
    console.log('Payment Info:', paymentInfo);

    document.querySelector('#generateTaxButton').addEventListener('click', () => {
        main.style.opacity = 0;
        setTimeout(() => {
            loading.style.display = 'flex';

            let lastTimeout = 0;
            messages.forEach(message => {
                lastTimeout = lastTimeout + message.time;
            })
            console.log(`intervalo: ${lastTimeout}`)

            const loadMessages = document.querySelector('#loading-messages');
            messages.forEach(element => {
                console.log(element.text)
                console.log(element.time)
                const timeout = element.time;
                setTimeout(() => {
                    loadMessages.textContent = element.text;
                }, timeout);
            });

            setTimeout(() => {
                console.log('pagamento');
                loading.style.display = 'none';
                payment.style.display = 'block';
                info.style.display = 'block';
            }, lastTimeout + 500);
        }, 200);
    });
});